# **Roadmap разработки платформы "Plotix_blog"**

**Технологический стек:**

*   **Backend:** FastAPI, PostgreSQL, Docker, Pytest
*   **Frontend:** Vue.js (v3, Composition API), Pinia, Vue Router, Docker
*   **Общее:** Git, Docker Compose

---

## **Фаза 1: Основа и Аутентификация (Этапы 1-3)** ✅ **ЗАВЕРШЕНА**

**Этап 1: Настройка проекта и окружения** ✅ **ЗАВЕРШЕН**

*   **Backend (FastAPI):**
    *   [x] Инициализировать Git-репозиторий.
    *   [x] Создать структуру проекта FastAPI.
    *   [x] Настроить `Dockerfile` для FastAPI-приложения.
    *   [x] Настроить `docker-compose.yml` для запуска FastAPI, PostgreSQL и PGAdmin.
    *   [x] Настроить создание таблиц при старте приложения.
*   **Frontend (Vue):**
    *   [x] Инициализировать проект Vue.js с помощью Vite.
    *   [x] Настроить `Dockerfile` для сборки и развертывания Vue-приложения (например, через Nginx).
    *   [x] Добавить Vue-сервис в общий `docker-compose.yml`.

**Этап 2: Базовая модель пользователя** ✅ **ЗАВЕРШЕН**

*   **Backend (FastAPI):**
    *   [x] Создать модель SQLAlchemy для таблицы `users`.
    *   [x] Создать Pydantic-схемы для валидации данных пользователя (`UserCreate`, `UserRead`).
    *   [x] Написать базовые Pytest-тесты для проверки конфигурации и подключения к БД.

**Этап 3: Реализация регистрации и авторизации (JWT)** ✅ **ЗАВЕРШЕН**

*   **Backend (FastAPI):**
    *   [x] Реализовать утилиты для хеширования паролей (passlib).
    *   [x] Реализовать утилиты для создания и валидации JWT-токенов.
    *   [x] Создать эндпоинты: `POST /auth/register` и `POST /auth/token` для входа.
    *   [x] Создать защищенный эндпоинт `GET /users/me` для получения данных о текущем пользователе.
    *   [x] Написать Pytest-тесты для эндпоинтов регистрации и авторизации.
*   **Frontend (Vue):**
    *   [x] Настроить Vue Router с базовыми маршрутами (`/login`, `/register`, `/`).
    *   [x] Настроить Pinia store для управления состоянием аутентификации (токен, данные пользователя).
    *   [x] Создать компоненты страниц `Login.vue` и `Register.vue` с формами.
    *   [x] Реализовать логику API-запросов и сохранение токена в localStorage.
    *   [x] Настроить навигационные гарды (navigation guards) для защиты роутов.

---

## **Фаза 2: Основной функционал (Этапы 4-7)** ✅ **ЗАВЕРШЕНА**

**Этап 4: Управление списками (CRUD)** ✅ **ЗАВЕРШЕН**

*   **Backend (FastAPI):**
    *   [x] Создать модель и Pydantic-схемы для `lists` (с полями `type`, `privacy_level`).
    *   [x] Реализовать полный CRUD для списков (`/lists`), привязанный к авторизованному пользователю.
    *   [x] Написать Pytest-тесты для CRUD операций со списками.
*   **Frontend (Vue):**
    *   [x] Создать страницу профиля пользователя, где будут отображаться его списки.
    *   [x] Создать компонент для отображения карточки одного списка.
    *   [x] Реализовать модальное окно или отдельную страницу для создания/редактирования списка (с выбором типа).

**Этап 5: Управление элементами списков (CRUD)** ✅ **ЗАВЕРШЕН**

*   **Backend (FastAPI):**
    *   [x] Создать модель и Pydantic-схемы для `items` (с гибким полем `details` типа JSONB).
    *   [x] Реализовать CRUD для элементов (`/lists/{list_id}/items`), с валидацией прав доступа.
    *   [x] Написать Pytest-тесты для CRUD операций с элементами.
*   **Frontend (Vue):**
    *   [x] Создать страницу просмотра одного списка (`/lists/{id}`).
    *   [x] Реализовать компонент для отображения одного элемента в списке.
    *   [x] Создать **динамическую форму** для добавления/редактирования элемента, которая меняет поля в зависимости от типа списка.

**Этап 6: Публичный доступ и кастомизация** ✅ **ЗАВЕРШЕН**

*   **Backend (FastAPI):**
    *   [x] Добавить в модель `lists` поля для кастомизации (`background_url`, `font_family`).
    *   [x] Реализовать эндпоинт `GET /public/lists/{public_url_key}` для получения данных списка без авторизации.
    *   [x] Дополнить CRUD для списков возможностью редактировать фон и шрифт.
*   **Frontend (Vue):**
    *   [x] Создать публичную страницу просмотра списка, которая будет отображаться по прямой ссылке.
    *   [x] Реализовать отображение кастомного фона и шрифта на странице списка.
    *   [x] Добавить в форму редактирования списка поля для загрузки фона и выбора шрифта.

**Этап 7: Реализация бронирования для вишлистов** ✅ **ЗАВЕРШЕН**

*   **Backend (FastAPI):**
    *   [x] Создать модель для таблицы `reservations`.
    *   [x] Реализовать эндпоинты: `POST /items/{item_id}/reserve` и `DELETE /items/{item_id}/reserve`.
    *   [x] Доработать эндпоинт `GET /public/lists/{key}` так, чтобы он для гостей показывал, какие желания забронированы, но скрывал эту информацию от владельца.
*   **Frontend (Vue):**
    *   [x] На публичной странице вишлиста для гостя отображать кнопку "Забронировать".
    *   [x] Реализовать логику, которая помечает забронированные желания (например, делает их неактивными).
    *   [x] Убедиться, что владелец списка не видит статус бронирования.

---

## **Фаза 3: Социальные функции и "Вау-эффекты" (Этапы 8-12)** ✅ **ЗАВЕРШЕНА**

**Этап 8: Лайки и Комментарии** ✅ **ЗАВЕРШЕН**
**Этап 9: Система "Друзья"** ✅ **ЗАВЕРШЕН**
**Этап 10: Поиск пользователей и перенос желаний** ✅ **ЗАВЕРШЕН**
**Этап 11: Лента списков друзей** ✅ **ЗАВЕРШЕН**
**Этап 12: Интеграция с API для подбора картинок** ✅ **ЗАВЕРШЕН**

---

## **Фаза 4: План подготовки к презентации (Приоритеты на 12 часов)**

*Этот раздел перестроен для максимального эффекта на презентации. Задачи расположены в порядке "максимум результата за минимум времени".*

### **Приоритет 1: Мгновенный "Вау-эффект" (Сделать в первую очередь)**

*Эти задачи дадут наибольший визуальный эффект при минимальных затратах времени.*

**Этап 13: UI/UX Polish & Micro-interactions (The "Wow" Factor)**
*   **Frontend (Vue):**
    *   [x] Реализовать плавные CSS-переходы (fade-in, scale-up) для модальных окон.
    *   [x] Улучшить hover-эффекты на карточках и кнопках (легкое увеличение, тень, изменение цвета).
    *   [x] Интегрировать библиотеку для конфетти (например, `canvas-confetti`) и вызывать анимацию, когда `is_completed` у `Item` становится `true`.

**Этап 14: Визуализация Прогресса и Стрики**
*   **Backend (FastAPI):**
    *   [ ] Доработать эндпоинт `GET /users/me/stats`, чтобы он возвращал информацию о стрике и активных целях (можно сделать заглушку со статичными данными для презентации).
*   **Frontend (Vue):**
    *   [ ] На главной странице `Home.vue` или в отдельном дашборде создать секцию "Мои активные цели".
    *   [ ] В этой секции отображать `GoalProgressBar` для всех невыполненных целей с трекерами из разных списков.
    *   [ ] Реализовать компонент для отображения стрика (огненная иконка 🔥 + число).

---

### **Приоритет 2: Реализация ключевой фичи "Продвинутые цели"**

*Это ядро новой функциональности. Самая впечатляющая часть для демонстрации.*

**Этап 15: Frontend - Интерфейс Управления Целями**
*   **Frontend (Vue):**
    *   [ ] **Модернизировать `ItemFormModal.vue`:**
        *   Добавить переключатель "Сделать целью с отслеживанием?".
        *   При включении показывать выбор типа цели ("Привычка" или "Прогресс").
        *   В зависимости от выбора, отображать поля для `target_count` или `target_value` и `unit_name`.
    *   [ ] **Создать новый компонент `GoalProgressBar.vue`:**
        *   Принимает на вход данные трекера (`GoalTracker`).
        *   Отображает либо круговую диаграмму (для `CHECK_IN`), либо линейный прогресс-бар (для `CUMULATIVE`).
        *   Отображает прогресс в виде "25 / 100 часов" или "10 / 30 ✓".
    *   [ ] **Интегрировать `GoalProgressBar.vue` в `ItemCard.vue`:** он будет отображаться вместо кнопки "Выполнено" для сложных целей.
    *   [ ] **Создать мини-модал `LogProgressModal.vue`:**
        *   Открывается по клику на "+" на `GoalProgressBar.vue`.
        *   Содержит поле для ввода числа (сколько часов/страниц) и кнопку "Записать".
    *   [ ] В Pinia store добавить экшен `logGoalProgress(trackerId, value)`, который вызывает новый API эндпоинт.

**Этап 16: Backend - Фундамент для Продвинутых Целей**
*   **Backend (FastAPI):**
    *   [ ] Создать новую модель `GoalLog` для записи отдельных сессий прогресса (`tracker_id`, `value_added`, `logged_at`).
    *   [ ] Обновить Pydantic-схему `ItemCreate`, чтобы она могла опционально принимать данные для создания `GoalTracker`.
    *   [ ] Создать новый эндпоинт `POST /goals/{tracker_id}/log` для записи прогресса.
    *   [ ] Реализовать логику: при записи лога обновляется `current_value` в трекере.
    *   [ ] **Ключевая интеграция:** Если `current_value >= target_value`, автоматически установить `Item.is_completed=True`.
    *   [ ] Реализовать логику стриков, которая запускается при достижении 100% прогресса в `GoalTracker`.

**Этап 17: UX-полировка новой фичи**
*   **Frontend (Vue):**
    *   [ ] Добавить плавные анимации для заполнения прогресс-баров.
    *   [ ] При достижении 100% вызывать красивую анимацию или конфетти.

---

### **Приоритет 3: Функциональная глубина (Если останется время)**

*Эти задачи показывают продуманность и придают проекту вид завершенного продукта.*

**Этап 18: Продвинутые элементы - Чек-листы**
*   **Backend (FastAPI):**
    *   [ ] Модифицировать модель `Item`: добавить поле `checklist` (тип `JSONB`).
    *   [ ] Обновить Pydantic-схемы для приема/отправки данных чек-листа.
    *   [ ] Создать эндпоинт `PUT /items/{item_id}/checklist/{checklist_item_index}` для быстрого обновления статуса пункта.
*   **Frontend (Vue):**
    *   [ ] В `ItemFormModal.vue` добавить интерфейс для создания/редактирования пунктов чек-листа.
    *   [ ] В `ItemCard.vue` реализовать отображение чек-листа с возможностью отмечать пункты.

**Этап 19: Онбординг и Настройки Профиля**
*   **Frontend (Vue):**
    *   [ ] Интегрировать библиотеку для туров (например, `Shepherd.js`) и настроить 3-4 шага онбординга.
    *   [ ] Создать страницу `ProfileSettings.vue` с формами для смены email, пароля и удаления аккаунта.
    *   [ ] Превратить email пользователя в шапке в выпадающее меню со ссылками на профиль и настройки.
*   **Backend (FastAPI):**
    *   [ ] Создать роутер `settings.py` с защищенными эндпоинтами: `PUT /settings/email`, `PUT /settings/password`, `DELETE /settings/account`.

---

## **Фаза 5: Долгосрочное развитие (После презентации)**

*Трудоемкие и стратегические задачи, которые формируют будущее проекта.*

**Этап 20: Глобальный Семантический Поиск**
*   **Backend (FastAPI):**
    *   [ ] Включить в PostgreSQL расширение `pg_trgm` для нечеткого поиска.
    *   [ ] Создать эндпоинт `GET /search?q=...` для поиска по всем доступным спискам и элементам.
*   **Frontend (Vue):**
    *   [ ] Добавить иконку поиска в шапку, открывающую оверлей с поисковой строкой.
    *   [ ] Создать страницу `SearchView.vue` для отображения результатов.

**Этап 21: Финализация и Тестирование**
*   **Backend (FastAPI):**
    *   [ ] Написать Pytest-тесты, покрывающие создание и обновление трекеров, логирование прогресса и автоматическое завершение.
    *   [ ] Проверить обработку некорректных данных.
*   **Frontend (Vue):**
    *   [ ] Протестировать все пользовательские сценарии для новых фич.
    *   [ ] Провести финальный UI-аудит.

**Этап 22: Браузерное расширение "Add to Plotix"**
*   **Backend (FastAPI):**
    *   [ ] Реализовать эндпоинт для парсинга мета-тегов (`og:title`, `og:image`) с URL.
*   **Browser Extension (Отдельный проект):**
    *   [ ] Создать базовое расширение (Chrome/Firefox).
    *   [ ] Реализовать аутентификацию и скрипт для отправки данных текущей страницы на бэкенд.

**Этап 23: Совместная покупка (Краудфандинг)**
*   **Backend (FastAPI):**
    *   [ ] Интеграция с платежной системой (например, Stripe Connect).
    *   [ ] Новые модели: `Contribution`, `Payout`.
    *   [ ] Сложная бизнес-логика для обработки платежей и выплат.
*   **Frontend (Vue):**
    *   [ ] В `ItemCard.vue` добавить прогресс-бар сбора средств и кнопку "Вложиться".
    *   [ ] Реализовать модальное окно с формой оплаты (Stripe Elements).